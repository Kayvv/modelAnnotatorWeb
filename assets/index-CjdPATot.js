import{n as k,D as je}from"./index-O-LmU3Sg.js";import{B as Ze,b as We,c as Ye,L as Xe,a as Je,Q as Ke,T as et,Q as tt,V as rt,N as it}from"./index-O-LmU3Sg.js";var Y={},q={},fe;function Ce(){if(fe)return q;fe=1,q.byteLength=s,q.toByteArray=B,q.fromByteArray=b;for(var w=[],i=[],f=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,_=u.length;c<_;++c)w[c]=u[c],i[u.charCodeAt(c)]=c;i[45]=62,i[95]=63;function l(x){var d=x.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=x.indexOf("=");y===-1&&(y=d);var F=y===d?0:4-y%4;return[y,F]}function s(x){var d=l(x),y=d[0],F=d[1];return(y+F)*3/4-F}function g(x,d,y){return(d+y)*3/4-y}function B(x){var d,y=l(x),F=y[0],U=y[1],P=new f(g(x,F,U)),j=0,M=U>0?F-4:F,S;for(S=0;S<M;S+=4)d=i[x.charCodeAt(S)]<<18|i[x.charCodeAt(S+1)]<<12|i[x.charCodeAt(S+2)]<<6|i[x.charCodeAt(S+3)],P[j++]=d>>16&255,P[j++]=d>>8&255,P[j++]=d&255;return U===2&&(d=i[x.charCodeAt(S)]<<2|i[x.charCodeAt(S+1)]>>4,P[j++]=d&255),U===1&&(d=i[x.charCodeAt(S)]<<10|i[x.charCodeAt(S+1)]<<4|i[x.charCodeAt(S+2)]>>2,P[j++]=d>>8&255,P[j++]=d&255),P}function E(x){return w[x>>18&63]+w[x>>12&63]+w[x>>6&63]+w[x&63]}function p(x,d,y){for(var F,U=[],P=d;P<y;P+=3)F=(x[P]<<16&16711680)+(x[P+1]<<8&65280)+(x[P+2]&255),U.push(E(F));return U.join("")}function b(x){for(var d,y=x.length,F=y%3,U=[],P=16383,j=0,M=y-F;j<M;j+=P)U.push(p(x,j,j+P>M?M:j+P));return F===1?(d=x[y-1],U.push(w[d>>2]+w[d<<4&63]+"==")):F===2&&(d=(x[y-2]<<8)+x[y-1],U.push(w[d>>10]+w[d>>4&63]+w[d<<2&63]+"=")),U.join("")}return q}var Q={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var oe;function Le(){return oe||(oe=1,Q.read=function(w,i,f,u,c){var _,l,s=c*8-u-1,g=(1<<s)-1,B=g>>1,E=-7,p=f?c-1:0,b=f?-1:1,x=w[i+p];for(p+=b,_=x&(1<<-E)-1,x>>=-E,E+=s;E>0;_=_*256+w[i+p],p+=b,E-=8);for(l=_&(1<<-E)-1,_>>=-E,E+=u;E>0;l=l*256+w[i+p],p+=b,E-=8);if(_===0)_=1-B;else{if(_===g)return l?NaN:(x?-1:1)*(1/0);l=l+Math.pow(2,u),_=_-B}return(x?-1:1)*l*Math.pow(2,_-u)},Q.write=function(w,i,f,u,c,_){var l,s,g,B=_*8-c-1,E=(1<<B)-1,p=E>>1,b=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=u?0:_-1,d=u?1:-1,y=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(s=isNaN(i)?1:0,l=E):(l=Math.floor(Math.log(i)/Math.LN2),i*(g=Math.pow(2,-l))<1&&(l--,g*=2),l+p>=1?i+=b/g:i+=b*Math.pow(2,1-p),i*g>=2&&(l++,g/=2),l+p>=E?(s=0,l=E):l+p>=1?(s=(i*g-1)*Math.pow(2,c),l=l+p):(s=i*Math.pow(2,p-1)*Math.pow(2,c),l=0));c>=8;w[f+x]=s&255,x+=d,s/=256,c-=8);for(l=l<<c|s,B+=c;B>0;w[f+x]=l&255,x+=d,l/=256,B-=8);w[f+x-d]|=y*128}),Q}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ce;function ke(){return ce||(ce=1,(function(w){const i=Ce(),f=Le(),u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;w.Buffer=s,w.SlowBuffer=P,w.INSPECT_MAX_BYTES=50;const c=2147483647;w.kMaxLength=c,s.TYPED_ARRAY_SUPPORT=_(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function l(r){if(r>c)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,s.prototype),e}function s(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(r)}return g(r,e,t)}s.poolSize=8192;function g(r,e,t){if(typeof r=="string")return b(r,e);if(ArrayBuffer.isView(r))return d(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(L(r,ArrayBuffer)||r&&L(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(r,SharedArrayBuffer)||r&&L(r.buffer,SharedArrayBuffer)))return y(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return s.from(n,e,t);const a=F(r);if(a)return a;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return s.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}s.from=function(r,e,t){return g(r,e,t)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function B(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function E(r,e,t){return B(r),r<=0?l(r):e!==void 0?typeof t=="string"?l(r).fill(e,t):l(r).fill(e):l(r)}s.alloc=function(r,e,t){return E(r,e,t)};function p(r){return B(r),l(r<0?0:U(r)|0)}s.allocUnsafe=function(r){return p(r)},s.allocUnsafeSlow=function(r){return p(r)};function b(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=j(r,e)|0;let n=l(t);const a=n.write(r,e);return a!==t&&(n=n.slice(0,a)),n}function x(r){const e=r.length<0?0:U(r.length)|0,t=l(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function d(r){if(L(r,Uint8Array)){const e=new Uint8Array(r);return y(e.buffer,e.byteOffset,e.byteLength)}return x(r)}function y(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,s.prototype),n}function F(r){if(s.isBuffer(r)){const e=U(r.length)|0,t=l(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||W(r.length)?l(0):x(r);if(r.type==="Buffer"&&Array.isArray(r.data))return x(r.data)}function U(r){if(r>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return r|0}function P(r){return+r!=r&&(r=0),s.alloc(+r)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(L(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,a=t.length;for(let h=0,o=Math.min(n,a);h<o;++h)if(e[h]!==t[h]){n=e[h],a=t[h];break}return n<a?-1:a<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return s.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const a=s.allocUnsafe(t);let h=0;for(n=0;n<e.length;++n){let o=e[n];if(L(o,Uint8Array))h+o.length>a.length?(s.isBuffer(o)||(o=s.from(o)),o.copy(a,h)):Uint8Array.prototype.set.call(a,o,h);else if(s.isBuffer(o))o.copy(a,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=o.length}return a};function j(r,e){if(s.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||L(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let a=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Z(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return he(r).length;default:if(a)return n?-1:Z(r).length;e=(""+e).toLowerCase(),a=!0}}s.byteLength=j;function M(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Ie(this,e,t);case"utf8":case"utf-8":return K(this,e,t);case"ascii":return Ee(this,e,t);case"latin1":case"binary":return Be(this,e,t);case"base64":return me(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}s.prototype._isBuffer=!0;function S(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}s.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?K(this,0,e):M.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let e="";const t=w.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u&&(s.prototype[u]=s.prototype.inspect),s.prototype.compare=function(e,t,n,a,h){if(L(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),a===void 0&&(a=0),h===void 0&&(h=this.length),t<0||n>e.length||a<0||h>this.length)throw new RangeError("out of range index");if(a>=h&&t>=n)return 0;if(a>=h)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,a>>>=0,h>>>=0,this===e)return 0;let o=h-a,m=n-t;const A=Math.min(o,m),R=this.slice(a,h),N=e.slice(t,n);for(let I=0;I<A;++I)if(R[I]!==N[I]){o=R[I],m=N[I];break}return o<m?-1:m<o?1:0};function X(r,e,t,n,a){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,W(t)&&(t=a?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(a)return-1;t=r.length-1}else if(t<0)if(a)t=0;else return-1;if(typeof e=="string"&&(e=s.from(e,n)),s.isBuffer(e))return e.length===0?-1:J(r,e,t,n,a);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):J(r,[e],t,n,a);throw new TypeError("val must be string, number or Buffer")}function J(r,e,t,n,a){let h=1,o=r.length,m=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;h=2,o/=2,m/=2,t/=2}function A(N,I){return h===1?N[I]:N.readUInt16BE(I*h)}let R;if(a){let N=-1;for(R=t;R<o;R++)if(A(r,R)===A(e,N===-1?0:R-N)){if(N===-1&&(N=R),R-N+1===m)return N*h}else N!==-1&&(R-=R-N),N=-1}else for(t+m>o&&(t=o-m),R=t;R>=0;R--){let N=!0;for(let I=0;I<m;I++)if(A(r,R+I)!==A(e,I)){N=!1;break}if(N)return R}return-1}s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return X(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return X(this,e,t,n,!1)};function pe(r,e,t,n){t=Number(t)||0;const a=r.length-t;n?(n=Number(n),n>a&&(n=a)):n=a;const h=e.length;n>h/2&&(n=h/2);let o;for(o=0;o<n;++o){const m=parseInt(e.substr(o*2,2),16);if(W(m))return o;r[t+o]=m}return o}function xe(r,e,t,n){return v(Z(e,r.length-t),r,t,n)}function ye(r,e,t,n){return v(Pe(e),r,t,n)}function ge(r,e,t,n){return v(he(e),r,t,n)}function be(r,e,t,n){return v(Se(e,r.length-t),r,t,n)}s.prototype.write=function(e,t,n,a){if(t===void 0)a="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")a=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const h=this.length-t;if((n===void 0||n>h)&&(n=h),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");let o=!1;for(;;)switch(a){case"hex":return pe(this,e,t,n);case"utf8":case"utf-8":return xe(this,e,t,n);case"ascii":case"latin1":case"binary":return ye(this,e,t,n);case"base64":return ge(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(r,e,t){return e===0&&t===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(e,t))}function K(r,e,t){t=Math.min(r.length,t);const n=[];let a=e;for(;a<t;){const h=r[a];let o=null,m=h>239?4:h>223?3:h>191?2:1;if(a+m<=t){let A,R,N,I;switch(m){case 1:h<128&&(o=h);break;case 2:A=r[a+1],(A&192)===128&&(I=(h&31)<<6|A&63,I>127&&(o=I));break;case 3:A=r[a+1],R=r[a+2],(A&192)===128&&(R&192)===128&&(I=(h&15)<<12|(A&63)<<6|R&63,I>2047&&(I<55296||I>57343)&&(o=I));break;case 4:A=r[a+1],R=r[a+2],N=r[a+3],(A&192)===128&&(R&192)===128&&(N&192)===128&&(I=(h&15)<<18|(A&63)<<12|(R&63)<<6|N&63,I>65535&&I<1114112&&(o=I))}}o===null?(o=65533,m=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),a+=m}return we(n)}const ee=4096;function we(r){const e=r.length;if(e<=ee)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ee));return t}function Ee(r,e,t){let n="";t=Math.min(r.length,t);for(let a=e;a<t;++a)n+=String.fromCharCode(r[a]&127);return n}function Be(r,e,t){let n="";t=Math.min(r.length,t);for(let a=e;a<t;++a)n+=String.fromCharCode(r[a]);return n}function Ie(r,e,t){const n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let a="";for(let h=e;h<t;++h)a+=Ue[r[h]];return a}function Fe(r,e,t){const n=r.slice(e,t);let a="";for(let h=0;h<n.length-1;h+=2)a+=String.fromCharCode(n[h]+n[h+1]*256);return a}s.prototype.slice=function(e,t){const n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const a=this.subarray(e,t);return Object.setPrototypeOf(a,s.prototype),a};function T(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||T(e,t,this.length);let a=this[e],h=1,o=0;for(;++o<t&&(h*=256);)a+=this[e+o]*h;return a},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||T(e,t,this.length);let a=this[e+--t],h=1;for(;t>0&&(h*=256);)a+=this[e+--t]*h;return a},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e=e>>>0,t||T(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||T(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||T(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||T(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=D(function(e){e=e>>>0,O(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&G(e,this.length-8);const a=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,h=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(a)+(BigInt(h)<<BigInt(32))}),s.prototype.readBigUInt64BE=D(function(e){e=e>>>0,O(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&G(e,this.length-8);const a=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],h=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(a)<<BigInt(32))+BigInt(h)}),s.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||T(e,t,this.length);let a=this[e],h=1,o=0;for(;++o<t&&(h*=256);)a+=this[e+o]*h;return h*=128,a>=h&&(a-=Math.pow(2,8*t)),a},s.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||T(e,t,this.length);let a=t,h=1,o=this[e+--a];for(;a>0&&(h*=256);)o+=this[e+--a]*h;return h*=128,o>=h&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e=e>>>0,t||T(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e=e>>>0,t||T(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(e,t){e=e>>>0,t||T(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(e,t){return e=e>>>0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e=e>>>0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=D(function(e){e=e>>>0,O(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&G(e,this.length-8);const a=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(a)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=D(function(e){e=e>>>0,O(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&G(e,this.length-8);const a=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(a)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),s.prototype.readFloatLE=function(e,t){return e=e>>>0,t||T(e,4,this.length),f.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e=e>>>0,t||T(e,4,this.length),f.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||T(e,8,this.length),f.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||T(e,8,this.length),f.read(this,e,!1,52,8)};function C(r,e,t,n,a,h){if(!s.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<h)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,a){if(e=+e,t=t>>>0,n=n>>>0,!a){const m=Math.pow(2,8*n)-1;C(this,e,t,n,m,0)}let h=1,o=0;for(this[t]=e&255;++o<n&&(h*=256);)this[t+o]=e/h&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,a){if(e=+e,t=t>>>0,n=n>>>0,!a){const m=Math.pow(2,8*n)-1;C(this,e,t,n,m,0)}let h=n-1,o=1;for(this[t+h]=e&255;--h>=0&&(o*=256);)this[t+h]=e/o&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function te(r,e,t,n,a){ue(e,n,a,r,t,7);let h=Number(e&BigInt(4294967295));r[t++]=h,h=h>>8,r[t++]=h,h=h>>8,r[t++]=h,h=h>>8,r[t++]=h;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,t}function re(r,e,t,n,a){ue(e,n,a,r,t,7);let h=Number(e&BigInt(4294967295));r[t+7]=h,h=h>>8,r[t+6]=h,h=h>>8,r[t+5]=h,h=h>>8,r[t+4]=h;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=o,o=o>>8,r[t+2]=o,o=o>>8,r[t+1]=o,o=o>>8,r[t]=o,t+8}s.prototype.writeBigUInt64LE=D(function(e,t=0){return te(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=D(function(e,t=0){return re(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t=t>>>0,!a){const A=Math.pow(2,8*n-1);C(this,e,t,n,A-1,-A)}let h=0,o=1,m=0;for(this[t]=e&255;++h<n&&(o*=256);)e<0&&m===0&&this[t+h-1]!==0&&(m=1),this[t+h]=(e/o>>0)-m&255;return t+n},s.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t=t>>>0,!a){const A=Math.pow(2,8*n-1);C(this,e,t,n,A-1,-A)}let h=n-1,o=1,m=0;for(this[t+h]=e&255;--h>=0&&(o*=256);)e<0&&m===0&&this[t+h+1]!==0&&(m=1),this[t+h]=(e/o>>0)-m&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=D(function(e,t=0){return te(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=D(function(e,t=0){return re(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ie(r,e,t,n,a,h){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ne(r,e,t,n,a){return e=+e,t=t>>>0,a||ie(r,e,t,4),f.write(r,e,t,n,23,4),t+4}s.prototype.writeFloatLE=function(e,t,n){return ne(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return ne(this,e,t,!1,n)};function se(r,e,t,n,a){return e=+e,t=t>>>0,a||ie(r,e,t,8),f.write(r,e,t,n,52,8),t+8}s.prototype.writeDoubleLE=function(e,t,n){return se(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return se(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,a){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!a&&a!==0&&(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);const h=a-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,a):Uint8Array.prototype.set.call(e,this.subarray(n,a),t),h},s.prototype.fill=function(e,t,n,a){if(typeof e=="string"){if(typeof t=="string"?(a=t,t=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(e.length===1){const o=e.charCodeAt(0);(a==="utf8"&&o<128||a==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let h;if(typeof e=="number")for(h=t;h<n;++h)this[h]=e;else{const o=s.isBuffer(e)?e:s.from(e,a),m=o.length;if(m===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(h=0;h<n-t;++h)this[h+t]=o[h%m]}return this};const $={};function V(r,e,t){$[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}V("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),V("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),V("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,a=t;return Number.isInteger(t)&&Math.abs(t)>2**32?a=ae(String(t)):typeof t=="bigint"&&(a=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(a=ae(a)),a+="n"),n+=` It must be ${e}. Received ${a}`,n},RangeError);function ae(r){let e="",t=r.length;const n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Re(r,e,t){O(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&G(e,r.length-(t+1))}function ue(r,e,t,n,a,h){if(r>t||r<e){const o=typeof e=="bigint"?"n":"";let m;throw e===0||e===BigInt(0)?m=`>= 0${o} and < 2${o} ** ${(h+1)*8}${o}`:m=`>= -(2${o} ** ${(h+1)*8-1}${o}) and < 2 ** ${(h+1)*8-1}${o}`,new $.ERR_OUT_OF_RANGE("value",m,r)}Re(n,a,h)}function O(r,e){if(typeof r!="number")throw new $.ERR_INVALID_ARG_TYPE(e,"number",r)}function G(r,e,t){throw Math.floor(r)!==r?(O(r,t),new $.ERR_OUT_OF_RANGE("offset","an integer",r)):e<0?new $.ERR_BUFFER_OUT_OF_BOUNDS:new $.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,r)}const Ae=/[^+/0-9A-Za-z-_]/g;function Ne(r){if(r=r.split("=")[0],r=r.trim().replace(Ae,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Z(r,e){e=e||1/0;let t;const n=r.length;let a=null;const h=[];for(let o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!a){if(t>56319){(e-=3)>-1&&h.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&h.push(239,191,189);continue}a=t;continue}if(t<56320){(e-=3)>-1&&h.push(239,191,189),a=t;continue}t=(a-55296<<10|t-56320)+65536}else a&&(e-=3)>-1&&h.push(239,191,189);if(a=null,t<128){if((e-=1)<0)break;h.push(t)}else if(t<2048){if((e-=2)<0)break;h.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;h.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;h.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return h}function Pe(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Se(r,e){let t,n,a;const h=[];for(let o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,a=t%256,h.push(a),h.push(n);return h}function he(r){return i.toByteArray(Ne(r))}function v(r,e,t,n){let a;for(a=0;a<n&&!(a+t>=e.length||a>=r.length);++a)e[a+t]=r[a];return a}function L(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function W(r){return r!==r}const Ue=(function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const n=t*16;for(let a=0;a<16;++a)e[n+a]=r[t]+r[a]}return e})();function D(r){return typeof BigInt>"u"?Te:r}function Te(){throw new Error("BigInt not supported")}})(Y)),Y}var De=ke();const{xsd:z}=k,Me=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,le={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},$e=/[\x00-\x20<>\\"\{\}\|\^\`]/,Oe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Ge=/$0^/;class qe{constructor(i){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,i=i||{},this._isImpliedBy=i.isImpliedBy,this._lineMode=!!i.lineMode){this._n3Mode=!1;for(const f in this)!(f in Oe)&&this[f]instanceof RegExp&&(this[f]=Ge)}else this._n3Mode=i.n3!==!1;this.comments=!!i.comments,this._literalClosingPos=0}_tokenizeToEnd(i,f){let u=this._input,c=u.length;for(;;){let s,g;for(;s=this._newline.exec(u);)this.comments&&(g=this._comment.exec(s[0]))&&_("comment",g[1],"",this._line,s[0].length),u=u.substr(s[0].length,u.length),c=u.length,this._line++;if(!s&&(s=this._whitespace.exec(u))&&(u=u.substr(s[0].length,u.length)),this._endOfFile.test(u))return f&&(this.comments&&(g=this._comment.exec(u))&&_("comment",g[1],"",this._line,u.length),u=null,_("eof","","",this._line,0)),this._input=u;const B=this._line,E=u[0];let p="",b="",x="",d=null,y=0,F=!1;switch(E){case"^":if(u.length<3)break;if(u[1]==="^"){if(this._previousMarker="^^",u=u.substr(2),u[0]!=="<"){F=!0;break}}else{this._n3Mode&&(y=1,p="^");break}case"<":if(d=this._unescapedIri.exec(u))p="IRI",b=d[1];else if(d=this._iri.exec(u)){if(b=this._unescape(d[1]),b===null||$e.test(b))return l(this);p="IRI"}else u.length>1&&u[1]==="<"?(p="<<",y=2):this._n3Mode&&u.length>1&&u[1]==="="&&(y=2,this._isImpliedBy?(p="abbreviation",b="<"):(p="inverse",b=">"));break;case">":u.length>1&&u[1]===">"&&(p=">>",y=2);break;case"_":((d=this._blank.exec(u))||f&&(d=this._blank.exec(`${u} `)))&&(p="blank",x="_",b=d[1]);break;case'"':if(d=this._simpleQuotedString.exec(u))b=d[1];else if({value:b,matchLength:y}=this._parseLiteral(u),b===null)return l(this);(d!==null||y!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(d=this._simpleApostropheString.exec(u))b=d[1];else if({value:b,matchLength:y}=this._parseLiteral(u),b===null)return l(this);(d!==null||y!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(d=this._variable.exec(u))&&(p="var",b=d[0]);break;case"@":this._previousMarker==="literal"&&(d=this._langcode.exec(u))?(p="langcode",b=d[1]):(d=this._keyword.exec(u))&&(p=d[0]);break;case".":if(u.length===1?f:u[1]<"0"||u[1]>"9"){p=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(d=this._number.exec(u)||f&&(d=this._number.exec(`${u} `)))&&(p="literal",b=d[0],x=typeof d[1]=="string"?z.double:typeof d[2]=="string"?z.decimal:z.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(d=this._sparqlKeyword.exec(u))?p=d[0].toUpperCase():F=!0;break;case"f":case"t":(d=this._boolean.exec(u))?(p="literal",b=d[0],x=z.boolean):F=!0;break;case"a":(d=this._shortPredicates.exec(u))?(p="abbreviation",b="a"):F=!0;break;case"=":this._n3Mode&&u.length>1&&(p="abbreviation",u[1]!==">"?(y=1,b="="):(y=2,b=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,p=E);break;case"{":!this._lineMode&&u.length>=2&&(u[1]==="|"?(p="{|",y=2):(p=E,y=1));break;case"|":u.length>=2&&u[1]==="}"&&(p="|}",y=2);break;default:F=!0}if(F&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(d=this._prefix.exec(u))?(p="prefix",b=d[1]||""):((d=this._prefixed.exec(u))||f&&(d=this._prefixed.exec(`${u} `)))&&(p="prefixed",x=d[1]||"",b=this._unescape(d[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return f||!/^'''|^"""/.test(u)&&/\n|\r/.test(u)?l(this):this._input=u;const U=y||d[0].length,P=_(p,b,x,B,U);this.previousToken=P,this._previousMarker=p,u=u.substr(U,u.length)}function _(s,g,B,E,p){const b=u?c-u.length:c,x=b+p,d={type:s,value:g,prefix:B,line:E,start:b,end:x};return i(null,d),d}function l(s){i(s._syntaxError(/^\S*/.exec(u)[0]))}}_unescape(i){let f=!1;const u=i.replace(Me,(c,_,l,s)=>{if(typeof _=="string")return String.fromCharCode(Number.parseInt(_,16));if(typeof l=="string"){let g=Number.parseInt(l,16);return g<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((g-=65536)>>10),56320+(g&1023))}return s in le?le[s]:(f=!0,"")});return f?null:u}_parseLiteral(i){if(i.length>=3){const f=i.match(/^(?:"""|"|'''|'|)/)[0],u=f.length;let c=Math.max(this._literalClosingPos,u);for(;(c=i.indexOf(f,c))>0;){let _=0;for(;i[c-_-1]==="\\";)_++;if(_%2===0){const l=i.substring(u,c),s=l.split(/\r\n|\r|\n/).length-1,g=c+u;if(u===1&&s!==0||u===3&&this._lineMode)break;return this._line+=s,{value:this._unescape(l),matchLength:g}}c++}this._literalClosingPos=i.length-u+1}return{value:"",matchLength:0}}_syntaxError(i){this._input=null;const f=new Error(`Unexpected "${i}" on line ${this._line}.`);return f.context={token:void 0,line:this._line,previousToken:this.previousToken},f}_readStartingBom(i){return i.startsWith("\uFEFF")?i.substr(1):i}tokenize(i,f){if(this._line=1,typeof i=="string")if(this._input=this._readStartingBom(i),typeof f=="function")queueMicrotask(()=>this._tokenizeToEnd(f,!0));else{const u=[];let c;if(this._tokenizeToEnd((_,l)=>_?c=_:u.push(l),!0),c)throw c;return u}else this._pendingBuffer=null,typeof i.setEncoding=="function"&&i.setEncoding("utf8"),i.on("data",u=>{this._input!==null&&u.length!==0&&(this._pendingBuffer&&(u=De.Buffer.concat([this._pendingBuffer,u]),this._pendingBuffer=null),u[u.length-1]&128?this._pendingBuffer=u:(typeof this._input>"u"?this._input=this._readStartingBom(typeof u=="string"?u:u.toString()):this._input+=u,this._tokenizeToEnd(f,!1)))}),i.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(f,!0)}),i.on("error",f)}}let de=0;class ve{constructor(i){this._contextStack=[],this._graph=null,i=i||{},this._setBase(i.baseIRI),i.factory&&_e(this,i.factory);const f=typeof i.format=="string"?i.format.match(/\w*$/)[0].toLowerCase():"",u=/turtle/.test(f),c=/trig/.test(f),_=/triple/.test(f),l=/quad/.test(f),s=this._n3Mode=/n3/.test(f),g=_||l;(this._supportsNamedGraphs=!(u||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(u||c||_||s),this._isImpliedBy=i.isImpliedBy,this._supportsRDFStar=f===""||/star|\*$/.test(f),g&&(this._resolveRelativeIRI=B=>null),this._blankNodePrefix=typeof i.blankNodePrefix!="string"?"":i.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=i.lexer||new qe({lineMode:g,n3:s,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!i.explicitQuantifiers}static _resetBlankNodePrefix(){de=0}_setBase(i){if(!i)this._base="",this._basePath="";else{const f=i.indexOf("#");f>=0&&(i=i.substr(0,f)),this._base=i,this._basePath=i.indexOf("/")<0?i:i.replace(/[^\/?]*(?:\?.*)?$/,""),i=i.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=i[0],this._baseScheme=i[1]}}_saveContext(i,f,u,c,_){const l=this._n3Mode;this._contextStack.push({type:i,subject:u,predicate:c,object:_,graph:f,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(i,f){const u=this._contextStack.pop();if(!u||u.type!==i)return this._error(`Unexpected ${f.type}`,f);this._subject=u.subject,this._predicate=u.predicate,this._object=u.object,this._graph=u.graph,this._n3Mode&&(this._inversePredicate=u.inverse,this._prefixes._=u.blankPrefix,this._quantified=u.quantified)}_readInTopContext(i){switch(i.type){case"eof":return this._graph!==null?this._error("Unclosed graph",i):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(i)}}_readEntity(i,f){let u;switch(i.type){case"IRI":case"typeIRI":const c=this._resolveIRI(i.value);if(c===null)return this._error("Invalid IRI",i);u=this._factory.namedNode(c);break;case"type":case"prefixed":const _=this._prefixes[i.prefix];if(_===void 0)return this._error(`Undefined prefix "${i.prefix}:"`,i);u=this._factory.namedNode(_+i.value);break;case"blank":u=this._factory.blankNode(this._prefixes[i.prefix]+i.value);break;case"var":u=this._factory.variable(i.value.substr(1));break;default:return this._error(`Expected entity but got ${i.type}`,i)}return!f&&this._n3Mode&&u.id in this._quantified&&(u=this._quantified[u.id]),u}_readSubject(i){switch(this._predicate=null,i.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",i);case"}":return this._readPunctuation(i);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',i);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',i);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",i);if(i.prefix.length===0)return this._literalValue=i.value,this._completeSubjectLiteral;this._subject=this._factory.literal(i.value,this._factory.namedNode(i.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",i);default:if((this._subject=this._readEntity(i))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(i){const f=i.type;switch(f){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[i.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${f}`,i):(this._subject=null,f==="]"?this._readBlankNodeTail(i):this._readPunctuation(i));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",i);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",i);default:if((this._predicate=this._readEntity(i))===void 0)return}return this._readObject}_readObject(i){switch(i.type){case"literal":if(i.prefix.length===0)return this._literalValue=i.value,this._readDataTypeOrLang;this._object=this._factory.literal(i.value,this._factory.namedNode(i.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",i);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",i);default:if((this._object=this._readEntity(i))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(i){return i.type==="{"?this._readGraph(i):this._readPredicate(i)}_readGraph(i){return i.type!=="{"?this._error(`Expected graph but got ${i.type}`,i):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(i){return i.type==="]"?(this._subject=null,this._readBlankNodeTail(i)):(this._predicate=null,this._readPredicate(i))}_readBlankNodeTail(i){if(i.type!=="]")return this._readBlankNodePunctuation(i);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const f=this._predicate===null;return this._restoreContext("blank",i),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:f?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(i){switch(i.type){case".":case"}":return this._subject=null,this._readPunctuation(i);default:return this._readPredicate(i)}}_readListItem(i){let f=null,u=null,c=this._readListItem;const _=this._subject,l=this._contextStack,s=l[l.length-1];switch(i.type){case"[":this._saveContext("blank",this._graph,u=this._factory.blankNode(),this.RDF_FIRST,this._subject=f=this._factory.blankNode()),c=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,u=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",i),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(c=this._readPredicate,this._subject===this.RDF_NIL)return c}else if(c=this._getContextEndReader(),this._object===this.RDF_NIL)return c;u=this.RDF_NIL;break;case"literal":i.prefix.length===0?(this._literalValue=i.value,c=this._readListItemDataTypeOrLang):(f=this._factory.literal(i.value,this._factory.namedNode(i.prefix)),c=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",i);default:if((f=this._readEntity(i))===void 0)return}if(u===null&&(this._subject=u=this._factory.blankNode()),_===null?s.predicate===null?s.subject=u:s.object=u:this._emit(_,this.RDF_REST,u,this._graph),f!==null){if(this._n3Mode&&(i.type==="IRI"||i.type==="prefixed"))return this._saveContext("item",this._graph,u,this.RDF_FIRST,f),this._subject=f,this._predicate=null,this._getPathReader(this._readListItem);this._emit(u,this.RDF_FIRST,f,this._graph)}return c}_readDataTypeOrLang(i){return this._completeObjectLiteral(i,!1)}_readListItemDataTypeOrLang(i){return this._completeObjectLiteral(i,!0)}_completeLiteral(i){let f=this._factory.literal(this._literalValue);switch(i.type){case"type":case"typeIRI":const u=this._readEntity(i);if(u===void 0)return;f=this._factory.literal(this._literalValue,u),i=null;break;case"langcode":f=this._factory.literal(this._literalValue,i.value),i=null;break}return{token:i,literal:f}}_completeSubjectLiteral(i){return this._subject=this._completeLiteral(i).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(i,f){const u=this._completeLiteral(i);if(u)return this._object=u.literal,f&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),u.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(u.token))}_readFormulaTail(i){return i.type!=="}"?this._readPunctuation(i):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",i),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(i){let f,u=this._graph;const c=this._subject,_=this._inversePredicate;switch(i.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",i);if(this._n3Mode)return this._readFormulaTail(i);this._graph=null;case".":this._subject=null,f=this._contextStack.length?this._readSubject:this._readInTopContext,_&&(this._inversePredicate=!1);break;case";":f=this._readPredicate;break;case",":f=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",i);const l=this._predicate,s=this._object;this._subject=this._factory.quad(c,l,s,this.DEFAULTGRAPH),f=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",i);this._subject=null,f=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(u=this._readEntity(i))!==void 0){f=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,i)}if(c!==null){const l=this._predicate,s=this._object;_?this._emit(s,l,c,u):this._emit(c,l,s,u)}return f}_readBlankNodePunctuation(i){let f;switch(i.type){case";":f=this._readPredicate;break;case",":f=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,i)}return this._emit(this._subject,this._predicate,this._object,this._graph),f}_readQuadPunctuation(i){return i.type!=="."?this._error("Expected dot to follow quad",i):this._readInTopContext}_readPrefix(i){return i.type!=="prefix"?this._error("Expected prefix to follow @prefix",i):(this._prefix=i.value,this._readPrefixIRI)}_readPrefixIRI(i){if(i.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,i);const f=this._readEntity(i);return this._prefixes[this._prefix]=f.value,this._prefixCallback(this._prefix,f),this._readDeclarationPunctuation}_readBaseIRI(i){const f=i.type==="IRI"&&this._resolveIRI(i.value);return f?(this._setBase(f),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",i)}_readNamedGraphLabel(i){switch(i.type){case"IRI":case"blank":case"prefixed":return this._readSubject(i),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",i)}}_readNamedGraphBlankLabel(i){return i.type!=="]"?this._error("Invalid graph label",i):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(i){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(i)):i.type!=="."?this._error("Expected declaration to end with a dot",i):this._readInTopContext}_readQuantifierList(i){let f;switch(i.type){case"IRI":case"prefixed":if((f=this._readEntity(i,!0))!==void 0)break;default:return this._error(`Unexpected ${i.type}`,i)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,f,this.QUANTIFIERS_GRAPH)):this._quantified[f.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(i){return i.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(i))}_getPathReader(i){return this._afterPath=i,this._readPath}_readPath(i){switch(i.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const f=this._contextStack,u=f.length&&f[f.length-1];if(u&&u.type==="item"){const c=this._subject;this._restoreContext("item",i),this._emit(this._subject,this.RDF_FIRST,c,this._graph)}return this._afterPath(i)}}_readForwardPath(i){let f,u;const c=this._factory.blankNode();if((u=this._readEntity(i))!==void 0)return this._predicate===null?(f=this._subject,this._subject=c):(f=this._object,this._object=c),this._emit(f,u,c,this._graph),this._readPath}_readBackwardPath(i){const f=this._factory.blankNode();let u,c;if((u=this._readEntity(i))!==void 0)return this._predicate===null?(c=this._subject,this._subject=f):(c=this._object,this._object=f),this._emit(f,u,c,this._graph),this._readPath}_readRDFStarTailOrGraph(i){return i.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(i))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,i):this._readRDFStarTail(i)}_readRDFStarTail(i){if(i.type!==">>")return this._error(`Expected >> but got ${i.type}`,i);const f=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",i),this._subject===null?(this._subject=f,this._readPredicate):(this._object=f,this._getContextEndReader())}_getContextEndReader(){const i=this._contextStack;if(!i.length)return this._readPunctuation;switch(i[i.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(i,f,u,c){this._callback(null,this._factory.quad(i,f,u,c||this.DEFAULTGRAPH))}_error(i,f){const u=new Error(`${i} on line ${f.line}.`);u.context={token:f,line:f.line,previousToken:this._lexer.previousToken},this._callback(u),this._callback=H}_resolveIRI(i){return/^[a-z][a-z0-9+.-]*:/i.test(i)?i:this._resolveRelativeIRI(i)}_resolveRelativeIRI(i){if(!i.length)return this._base;switch(i[0]){case"#":return this._base+i;case"?":return this._base.replace(/(?:\?.*)?$/,i);case"/":return(i[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(i);default:return/^[^/:]*:/.test(i)?null:this._removeDotSegments(this._basePath+i)}}_removeDotSegments(i){if(!/(^|\/)\.\.?($|[/#?])/.test(i))return i;const f=i.length;let u="",c=-1,_=-1,l=0,s="/";for(;c<f;){switch(s){case":":if(_<0&&i[++c]==="/"&&i[++c]==="/")for(;(_=c+1)<f&&i[_]!=="/";)c=_;break;case"?":case"#":c=f;break;case"/":if(i[c+1]===".")switch(s=i[++c+1],s){case"/":u+=i.substring(l,c-1),l=c+1;break;case void 0:case"?":case"#":return u+i.substring(l,c)+i.substr(c+1);case".":if(s=i[++c+1],s===void 0||s==="/"||s==="?"||s==="#"){if(u+=i.substring(l,c-2),(l=u.lastIndexOf("/"))>=_&&(u=u.substr(0,l)),s!=="/")return`${u}/${i.substr(c+1)}`;l=c+1}}}s=i[++c]}return u+i.substring(l)}parse(i,f,u){let c,_,l;if(f&&(f.onQuad||f.onPrefix||f.onComment)?(c=f.onQuad,_=f.onPrefix,l=f.onComment):(c=f,_=u),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${de++}_`,this._prefixCallback=_||H,this._inversePredicate=!1,this._quantified=Object.create(null),!c){const g=[];let B;if(this._callback=(E,p)=>{E?B=E:p&&g.push(p)},this._lexer.tokenize(i).every(E=>this._readCallback=this._readCallback(E)),B)throw B;return g}let s=(g,B)=>{g!==null?(this._callback(g),this._callback=H):this._readCallback&&(this._readCallback=this._readCallback(B))};l&&(this._lexer.comments=!0,s=(g,B)=>{g!==null?(this._callback(g),this._callback=H):this._readCallback&&(B.type==="comment"?l(B.value):this._readCallback=this._readCallback(B))}),this._callback=c,this._lexer.tokenize(i,s)}}function H(){}function _e(w,i){w._factory=i,w.DEFAULTGRAPH=i.defaultGraph(),w.RDF_FIRST=i.namedNode(k.rdf.first),w.RDF_REST=i.namedNode(k.rdf.rest),w.RDF_NIL=i.namedNode(k.rdf.nil),w.N3_FORALL=i.namedNode(k.r.forAll),w.N3_FORSOME=i.namedNode(k.r.forSome),w.ABBREVIATIONS={a:i.namedNode(k.rdf.type),"=":i.namedNode(k.owl.sameAs),">":i.namedNode(k.log.implies),"<":i.namedNode(k.log.isImpliedBy)},w.QUANTIFIERS_GRAPH=i.namedNode("urn:n3:quantifiers")}_e(ve.prototype,je);export{Ze as BaseIRI,We as BlankNode,je as DataFactory,Ye as DefaultGraph,qe as Lexer,Xe as Literal,Je as NamedNode,ve as Parser,Ke as Quad,et as Term,tt as Triple,rt as Variable,it as Writer};
